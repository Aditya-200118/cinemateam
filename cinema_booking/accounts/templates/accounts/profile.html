{% extends "accounts_base.html" %}

{% block title %}Profile{% endblock %}

{% block content %}
<section class="p-3 p-md-4 p-xl-5">
	<div class="container" style="overflow: hidden;">
		{% if messages %}
        {% for message in messages %}
            {% if 'profile_update' in message.tags %}
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% elif 'profile_error' in message.tags %}
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% else %}
                <div class="alert alert-info alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endif %}
        {% endfor %}
	{% endif %}
		<div class="card border-light-subtle shadow-sm" style="width: 80%; height: auto; margin: auto;">
			<div class="row g-0">
				<div class="col-12 col-md-6 text-bg-primary">
					<div class="d-flex align-items-center justify-content-center h-100">
						<div class="col-10 col-xl-8 py-3">
							<h2 class="h1 mb-4">Your Profile</h2>
							<p class="lead m-0">View and manage your personal information and account settings.</p>
						</div>
					</div>
				</div>
				<div class="col-12 col-md-6">
					<div class="card-body p-3 p-md-4 p-xl-5">
						<div class="row">
							<div class="col-12">
								<div class="mb-5">
									<h2 class="h3">Profile Details</h2>
									<h3 class="fs-6 fw-normal text-secondary m-0">Your personal information</h3>
								</div>
							</div>
						</div>
						<div class="row gy-3 gy-md-4 overflow-hidden">
							<div class="col-12">
								<label class="form-label">First Name</label>
								<p class="form-control-plaintext">{{ user.first_name }}</p>
							</div>
							<div class="col-12">
								<label class="form-label">Last Name</label>
								<p class="form-control-plaintext">{{ user.last_name }}</p>
							</div>
							<div class="col-12">
								<label class="form-label">Middle Name</label>
								<p class="form-control-plaintext">{{ user.middle_name }}</p>
							</div>
							<div class="col-12">
								<label class="form-label">Email</label>
								<p class="form-control-plaintext">{{ user.email }}</p>
							</div>
							<div class="col-12">
								<label class="form-label">Contact Number</label>
								<p class="form-control-plaintext">{{ user.contact_no }}</p>
							</div>
							<div class="col-12">
								<label class="form-label">Promotions</label>
								<p class="form-control-plaintext">{{ user.promotions }}</p>
							</div>
							<div class="col-12">
								<label class="form-label">Billing Address</label>
								<p class="form-control-plaintext">{{ user.address.billing_address }}</p>
							</div>
							<div class="col-12">
								<label class="form-label">City</label>
								<p class="form-control-plaintext">{{ user.address.city }}</p>
							</div>
							<div class="col-12">
								<label class="form-label">State</label>
								<p class="form-control-plaintext">{{ user.address.state }}</p>
							</div>
							<div class="col-12">
								<label class="form-label">Zip Code</label>
								<p class="form-control-plaintext">{{ user.address.zip_code }}</p>
							</div>
							{% for card in user.profile.cards %}
							<div class="col-12">
								<label class="form-label">Card Number</label>
								<p class="form-control-plaintext">{{ card.card_number }}</p>
							</div>
							<div class="col-12">
								<label class="form-label">Expiry Date</label>
								<p class="form-control-plaintext">{{ card.expiry_date }}</p>
							</div>
							<div class="col-12">
								<label class="form-label">CVV</label>
								<p class="form-control-plaintext">{{ card.cvv }}</p>
							</div>
							{% endfor %}
							<div class="col-12">
								<div class="d-grid gap-2 d-md-flex justify-content-md-end">
									<a href="{% url 'edit_profile' %}" class="btn btn-primary">Edit Profile</a>
									<a href="{% url 'show_payment_methods' %}" class="btn btn-secondary">Modify
										Payment</a>
									<a href="{% url 'change_password' %}" class="btn btn-secondary">Change Password</a>
									<a href="{% url 'order_history' %}" class="btn btn-secondary">Order History</a>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-12">
								<hr class="mt-5 mb-4 border-secondary-subtle">
								<p class="m-0 text-secondary text-center">Want to go back to the home page? <a
										href="{% url 'home' %}" class="link-primary text-decoration-none">Home</a></p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
{% endblock %}
